{"version":3,"file":"Checkbox.js","sources":["../src/components/Input/Checkbox.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Spring, animated } from 'react-spring'\nimport { useTheme } from '../../theme'\nimport { noop } from '../../utils'\nimport { springs, GU, RADIUS } from '../../style'\nimport FocusVisible from '../FocusVisible/FocusVisible'\n\nconst SIZE = 18\nconst CHECKBOX_RADIUS = 2\nconst RADIO_BULLET_SIZE = 10\n\nclass Checkbox extends React.PureComponent {\n  static propTypes = {\n    checked: PropTypes.bool,\n    disabled: PropTypes.bool,\n    indeterminate: PropTypes.bool,\n    onChange: PropTypes.func,\n    tabIndex: PropTypes.string,\n    theme: PropTypes.object,\n    variant: PropTypes.oneOf(['checkbox', 'radio']),\n  }\n  static defaultProps = {\n    checked: false,\n    disabled: false,\n    indeterminate: false,\n    onChange: noop,\n    tabIndex: '0',\n    variant: 'checkbox',\n  }\n  _element = React.createRef()\n  getAriaChecked() {\n    const { checked, indeterminate } = this.props\n    if (indeterminate) return 'mixed'\n    if (checked) return 'true'\n    return 'false'\n  }\n  handleKeyPress = e => {\n    e.preventDefault()\n  }\n  handleClick = e => {\n    const { onChange, checked, indeterminate } = this.props\n    onChange(indeterminate ? false : !checked)\n  }\n  focus = () => {\n    this._element.current.focus()\n  }\n  renderCheck(visible, Icon) {\n    const { disabled, theme } = this.props\n    return (\n      <Spring\n        from={{ progress: 0 }}\n        to={{ progress: Number(visible) }}\n        config={springs.instant}\n        native\n      >\n        {({ progress }) => (\n          <animated.span\n            css={`\n              position: absolute;\n              top: 0;\n              left: 0;\n              right: 0;\n              bottom: 0;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              transform-origin: 50% 50%;\n            `}\n            style={{\n              opacity: progress,\n              transform: progress.interpolate(v => `scale(${v})`),\n            }}\n          >\n            <Icon color={disabled ? theme.selectedDisabled : theme.selected} />\n          </animated.span>\n        )}\n      </Spring>\n    )\n  }\n  render() {\n    const {\n      checked,\n      disabled,\n      indeterminate,\n      tabIndex,\n      theme,\n      variant,\n      ...props\n    } = this.props\n    return (\n      <FocusVisible>\n        {({ focusVisible, onFocus }) => (\n          <button\n            type=\"button\"\n            ref={this._element}\n            role={variant}\n            tabIndex={tabIndex}\n            aria-checked={this.getAriaChecked()}\n            onClick={this.handleClick}\n            onKeyPress={this.handleKeyPress}\n            onFocus={onFocus}\n            disabled={disabled}\n            css={`\n              display: inline-flex;\n              position: relative;\n              width: ${SIZE}px;\n              height: ${SIZE}px;\n              margin: ${0.5 * GU}px;\n              padding: 0;\n              background: ${disabled ? theme.controlDisabled : theme.control};\n              border: 1px solid ${theme.controlBorder};\n              border-radius: ${variant === 'radio'\n                ? '50%'\n                : `${CHECKBOX_RADIUS}px`};\n              outline: 0;\n              &::-moz-focus-inner {\n                border: 0;\n              }\n\n              ${!disabled\n                ? `\n                    cursor: pointer;\n                    &:active {\n                      border-color: ${theme.controlBorderPressed};\n                    }\n                    &:focus .focus-ring {\n                      display: ${focusVisible ? 'block' : 'none'};\n                    }\n                  `\n                : ''};\n            `}\n            {...props}\n          >\n            {variant === 'checkbox' &&\n              this.renderCheck(checked && !indeterminate, Check)}\n            {variant === 'checkbox' && this.renderCheck(indeterminate, Dash)}\n            {variant === 'radio' && this.renderCheck(checked, Bullet)}\n\n            <span\n              className=\"focus-ring\"\n              css={`\n                position: absolute;\n                top: -2px;\n                left: -2px;\n                right: -2px;\n                bottom: -2px;\n                border: 2px solid ${theme.focus};\n                border-radius: ${variant === 'radio' ? '50%' : `${RADIUS}px`};\n                display: none;\n              `}\n            />\n          </button>\n        )}\n      </FocusVisible>\n    )\n  }\n}\n\n/* eslint-disable react/prop-types */\n\nconst Dash = ({ color }) => (\n  /* Use SVG to have subpixels (strokeWidth=\"1.5\") on Chrome */\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 14 14\">\n    <line x1=\"3\" y1=\"7\" x2=\"11\" y2=\"7\" stroke={color} strokeWidth=\"1.5\" />\n  </svg>\n)\n\nconst Check = ({ color }) => (\n  <svg width=\"12\" height=\"8\" viewBox=\"0 0 12 8\">\n    <path\n      d={`\n        M11.059 1.393\n        L4.335  7.395\n        L0.944  3.260\n        L2.104  2.309\n        L4.503  5.234\n        L10.060 0.274\n        L11.059 1.393\n        Z\n      `}\n      fill={color}\n    />\n  </svg>\n)\n\nconst Bullet = ({ color }) => (\n  <span\n    css={`\n      display: block;\n      width: ${RADIO_BULLET_SIZE}px;\n      height: ${RADIO_BULLET_SIZE}px;\n      border-radius: 50%;\n      background: ${color};\n    `}\n  />\n)\n\nconst CheckBoxWithTheme = React.forwardRef((props, ref) => {\n  const theme = useTheme()\n  return <Checkbox theme={theme} ref={ref} {...props} />\n})\n\n/* eslint-enable react/prop-types */\n\nexport default CheckBoxWithTheme\n"],"names":["SIZE","CHECKBOX_RADIUS","RADIO_BULLET_SIZE","Checkbox","React","createRef","e","preventDefault","props","onChange","checked","indeterminate","_element","current","focus","visible","Icon","disabled","theme","Spring","progress","Number","springs","instant","opacity","transform","interpolate","v","selectedDisabled","selected","tabIndex","variant","FocusVisible","focusVisible","onFocus","getAriaChecked","handleClick","handleKeyPress","GU","controlDisabled","control","controlBorder","controlBorderPressed","renderCheck","Check","Dash","Bullet","RADIUS","PureComponent","PropTypes","bool","func","string","object","oneOf","noop","color","CheckBoxWithTheme","forwardRef","ref","useTheme"],"mappings":"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"}