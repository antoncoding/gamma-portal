{"version":3,"file":"Redraw.js","sources":["../../../../../src/providers/Redraw/Redraw.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport getDisplayName from 'react-display-name'\n\n// Render prop component and HOC for re-rendering.\n// For a discussion on pitfalls, see\n// https://gist.github.com/staltz/08bf613199092eeb41ac8137d51eb5e6\n\nclass Redraw extends React.PureComponent {\n  static propTypes = {\n    interval: PropTypes.number,\n    children: PropTypes.func.isRequired,\n  }\n  static defaultProps = {\n    interval: 1000,\n  }\n  state = {\n    lastDraw: -1,\n  }\n  componentDidMount() {\n    this.raf = null\n    this.draw()\n  }\n  componentWillUnmount() {\n    this.raf && cancelAnimationFrame(this.raf)\n  }\n  draw = () => {\n    this.raf = requestAnimationFrame(this.draw)\n\n    const { interval } = this.props\n    const { lastDraw } = this.state\n    const now = Date.now()\n    const delta = now - lastDraw\n\n    if (lastDraw === -1 || delta > interval) {\n      this.setState({\n        lastDraw: Math.round(now / interval) * interval,\n      })\n    }\n  }\n  render() {\n    return this.props.children()\n  }\n}\n\nconst hocWrap = (Component, interval) => {\n  const HOC = props => (\n    <Redraw interval={interval}>{() => <Component {...props} />}</Redraw>\n  )\n  HOC.displayName = `Redraw(${getDisplayName(Component)})`\n  return HOC\n}\n\nRedraw.hocWrap = hocWrap\n\nexport { Redraw, hocWrap }\nexport default Redraw\n"],"names":["Redraw","lastDraw","raf","requestAnimationFrame","draw","interval","props","state","now","Date","delta","setState","Math","round","cancelAnimationFrame","children","React","PureComponent","PropTypes","number","func","isRequired","hocWrap","Component","HOC","displayName","getDisplayName"],"mappings":";;;;;;;;;;;;;;AAKA;AACA;;IAEMA;;;;;;;;;;;;;;;;0DAQI;AACNC,MAAAA,QAAQ,EAAE,CAAC;AADL;;yDAUD,YAAM;AACX,YAAKC,GAAL,GAAWC,qBAAqB,CAAC,MAAKC,IAAN,CAAhC;AADW,UAGHC,QAHG,GAGU,MAAKC,KAHf,CAGHD,QAHG;AAAA,UAIHJ,QAJG,GAIU,MAAKM,KAJf,CAIHN,QAJG;AAKX,UAAMO,GAAG,GAAGC,IAAI,CAACD,GAAL,EAAZ;AACA,UAAME,KAAK,GAAGF,GAAG,GAAGP,QAApB;;AAEA,UAAIA,QAAQ,KAAK,CAAC,CAAd,IAAmBS,KAAK,GAAGL,QAA/B,EAAyC;AACvC,cAAKM,QAAL,CAAc;AACZV,UAAAA,QAAQ,EAAEW,IAAI,CAACC,KAAL,CAAWL,GAAG,GAAGH,QAAjB,IAA6BA;AAD3B,SAAd;AAGD;AACF;;;;;;;wCApBmB;AAClB,WAAKH,GAAL,GAAW,IAAX;AACA,WAAKE,IAAL;AACD;;;2CACsB;AACrB,WAAKF,GAAL,IAAYY,oBAAoB,CAAC,KAAKZ,GAAN,CAAhC;AACD;;;6BAeQ;AACP,aAAO,KAAKI,KAAL,CAAWS,QAAX,EAAP;AACD;;;;EAlCkBC,KAAK,CAACC;;eAArBjB,qBACe;AACjBK,EAAAA,QAAQ,EAAEa,SAAS,CAACC,MADH;AAEjBJ,EAAAA,QAAQ,EAAEG,SAAS,CAACE,IAAV,CAAeC;AAFR;;eADfrB,wBAKkB;AACpBK,EAAAA,QAAQ,EAAE;AADU;;IAgClBiB,OAAO,GAAG,SAAVA,OAAU,CAACC,SAAD,EAAYlB,QAAZ,EAAyB;AACvC,MAAMmB,GAAG,GAAG,SAANA,GAAM,CAAAlB,KAAK;AAAA,wBACf,oBAAC,MAAD;AAAQ,MAAA,QAAQ,EAAED;AAAlB,OAA6B;AAAA,0BAAM,oBAAC,SAAD,EAAeC,KAAf,CAAN;AAAA,KAA7B,CADe;AAAA,GAAjB;;AAGAkB,EAAAA,GAAG,CAACC,WAAJ,oBAA4BC,cAAc,CAACH,SAAD,CAA1C;AACA,SAAOC,GAAP;AACD;;AAEDxB,MAAM,CAACsB,OAAP,GAAiBA,OAAjB;;;;;"}