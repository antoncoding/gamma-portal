{"version":3,"file":"ProgressBar.js","sources":["../../../../../src/components/ProgressBar/ProgressBar.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from '../../proptypes'\nimport styled, { keyframes } from 'styled-components'\nimport { useSpring, animated, interpolate } from 'react-spring/hooks'\nimport { springs } from '../../style'\nimport { useTheme } from '../../theme'\nimport { warnOnce } from '../../utils/environment'\n\nconst RADIUS = 2\nconst BAR_HEIGHT = 6\n\nconst INDETERMINATE_WIDTH = 1 / 4\nconst INDETERMINATE_DURATION = 1600\n\nconst indeterminateAnim = keyframes`\n  // x positions use -1px to anticipate any rounding issues\n  0% {\n    transform: translate3d(calc(-100% - 1px), 0, 0);\n  }\n  70%, 100% {\n    transform: translate3d(calc(${100 / INDETERMINATE_WIDTH}% + 1px), 0, 0);\n  }\n`\n\nconst ProgressBar = React.memo(({ animate, color, progress, value }) => {\n  // Support `progress` for a while but warn if being used.\n  if (value === -1 && typeof progress === 'number') {\n    value = progress\n\n    warnOnce(\n      'ProgressBar:progress',\n      'The `progress` prop of ProgressBar is deprecated: please use `value` instead.'\n    )\n  }\n\n  // The indeterminate state can be triggered either by not setting the value\n  // (to mimic the <progress> element in HTML), or by setting the -1 value (for\n  // convenience in React).\n  const indeterminate = value === -1\n\n  const theme = useTheme()\n  const currentColor = color === undefined ? theme.accent : color\n\n  const transition = useSpring({\n    config: { ...springs.smooth, precision: 0.001 },\n    from: { scale: 0, x: 0 },\n    to: { scale: value, x: 0 },\n    immediate: !animate,\n  })\n\n  return (\n    <div\n      css={`\n        width: 100%;\n        height: ${BAR_HEIGHT}px;\n        background: ${theme.surfaceUnder};\n        border-radius: ${RADIUS}px;\n        overflow: hidden;\n      `}\n    >\n      <Bar\n        style={{\n          width: `${(indeterminate ? INDETERMINATE_WIDTH : 1) * 100}%`,\n          background: currentColor,\n          borderRadius: `${indeterminate ? RADIUS : 0}px`,\n          animationName: `${indeterminate ? indeterminateAnim.name : 'none'}`,\n          transform: interpolate(\n            [transition.x, transition.scale],\n            (x, s) => `translate3d(${x * 100}%, 0, 0) scale3d(${s}, 1, 1)`\n          ),\n        }}\n      />\n    </div>\n  )\n})\n\nconst Bar = styled(animated.div)`\n  width: 100%;\n  height: ${BAR_HEIGHT}px;\n  transform-origin: 0 0;\n\n  // this need to be defined here rather than as a style property, so that\n  // styled can inject the @keyframes (on demand since styled@v4).\n  animation: ${indeterminateAnim} ${INDETERMINATE_DURATION}ms ease-in-out\n    infinite;\n  animation-name: none;\n`\n\nProgressBar.defaultProps = {\n  animate: true,\n  value: -1,\n}\n\nProgressBar.propTypes = {\n  animate: PropTypes.bool,\n  color: PropTypes.string,\n  progress: PropTypes._0to1,\n  value: PropTypes.oneOfType([PropTypes._0to1, PropTypes.oneOf([-1])]),\n}\n\nexport default ProgressBar\n"],"names":["RADIUS","BAR_HEIGHT","INDETERMINATE_WIDTH","INDETERMINATE_DURATION","indeterminateAnim","keyframes","ProgressBar","React","memo","animate","color","progress","value","warnOnce","indeterminate","theme","useTheme","currentColor","undefined","accent","transition","useSpring","config","springs","smooth","precision","from","scale","x","to","immediate","surfaceUnder","width","background","borderRadius","animationName","name","transform","interpolate","s","Bar","styled","animated","div","defaultProps","propTypes","PropTypes","bool","string","_0to1","oneOfType","oneOf"],"mappings":"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"}