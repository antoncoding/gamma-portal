{"version":3,"file":"utils.js","sources":["../../../../../node_modules/use-token/dist/utils.js"],"sourcesContent":["import { keccak_256 as keccak256 } from 'js-sha3';\nconst ADDRESS_REGEX = /^0x[0-9a-fA-F]{40}$/;\nconst EMPTY_ADDRESS = '0x0000000000000000000000000000000000000000';\nconst TRUST_WALLET_BASE_URL = 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum';\nconst ETHEREUM_LISTS_BASE_URL = 'https://raw.githubusercontent.com/ethereum-lists/tokens/master/tokens/eth';\nconst ETHEREUM_DATA = {\n    name: 'Ethereum',\n    symbol: 'ETH'\n};\nfunction iconUrl(address) {\n    if (address === EMPTY_ADDRESS) {\n        return `${TRUST_WALLET_BASE_URL}/info/logo.png`;\n    }\n    return `${TRUST_WALLET_BASE_URL}/assets/${address}/logo.png`;\n}\nfunction tokenDataUrl(address) {\n    return `https://raw.githubusercontent.com/ethereum-lists/tokens/master/tokens/eth/${address}.json`;\n}\nexport async function fetchTokenData(address) {\n    if (address === EMPTY_ADDRESS) {\n        return ETHEREUM_DATA;\n    }\n    try {\n        address = toChecksumAddress(address.trim());\n    } catch (err) {\n        throw new Error(`Invalid address: ${address}`);\n    }\n    try {\n        const response = await fetch(tokenDataUrl(address));\n        if (!response.ok) {\n            throw new Error('Wrong HTTP status');\n        }\n        return response.json();\n    } catch (err) {\n        throw err;\n    }\n}\n/**\n * Get the address of a token icon\n *\n * @param {string} address The contract address of the token, or the zero address (0x000â€¦) to get the Ethereum icon.\n * @return {string|null} The generated URL, or null if the address is invalid.\n */\nexport function tokenIconUrl(address = '') {\n    try {\n        address = toChecksumAddress(address.trim());\n    } catch (err) {\n        return null;\n    }\n    if (address === EMPTY_ADDRESS) {\n        return `${TRUST_WALLET_BASE_URL}/info/logo.png`;\n    }\n    return `${TRUST_WALLET_BASE_URL}/assets/${address}/logo.png`;\n}\n/**\n * Converts to a checksum address\n *\n * This function is taken from web3-utils:\n * https://github.com/ethereum/web3.js/blob/22df832303e349f8ae02f0392e56abe10e1dfaac/packages/web3-utils/src/index.js#L287-L315\n * And was adapted to use js-sha3 rather than soliditySha3.js from web3.js, in\n * order to avoid adding the BN.js and underscore dependencies.\n *\n * @method toChecksumAddress\n * @param {String} address the given HEX address\n * @return {String}\n */\nfunction toChecksumAddress(address) {\n    if (!/^(0x)?[0-9a-f]{40}$/i.test(address)) {\n        throw new Error('Given address \"' + address + '\" is not a valid Ethereum address.');\n    }\n    address = address.toLowerCase().replace(/^0x/i, '');\n    const addressHash = keccak256(address).replace(/^0x/i, '');\n    let checksumAddress = '0x';\n    for(let i = 0; i < address.length; i++){\n        // If ith character is 9 to f then make it uppercase\n        if (parseInt(addressHash[i], 16) > 7) {\n            checksumAddress += address[i].toUpperCase();\n        } else {\n            checksumAddress += address[i];\n        }\n    }\n    return checksumAddress;\n}\n"],"names":["keccak256"],"mappings":"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"}